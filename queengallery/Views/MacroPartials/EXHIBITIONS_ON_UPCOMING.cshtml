@inherits Umbraco.Web.Macros.PartialViewMacroPage

@{
    string condition = "";
    string sort = "beginDate ";
    int blogId = 3576;
    var valuesFilter = new Dictionary<string, object>
    ();

    valuesFilter.Add("Todate", DateTime.Now);

      condition = "beginDate > Todate";

    

    var items = Umbraco.Media(blogId).Children().Where(condition, valuesFilter).OrderBy(sort);
    }
  

                                         <section id="Main">
                                             <div class="  ">
                                                 <h1 class="text-center"><strong>Upcoming</strong></h1>

                            <section class="cd-horizontal-timeline">

        <div class="timeline">
            <div class="events-wrapper">
                <div class="events">
                    <ol>

                        @{

                        var currentDate = DateTime.Today;
                        var dateNow = DateTime.Now.ToString("dd/MM/yyyy");

                        bool isfirst=true;
                        string select="selected";
                       
                         <li><a  id="aNow" href="#0" class="selected" data-date="@dateNow">Now</a></li> 
                        foreach(dynamic item in items){
                        if (isfirst)
                        {
                        select="selected"; 
                       
                        }else
                        {
                        select="";
                        }

                        isfirst=false;
                       
 
                            <li><a href="#0" class="" data-date='@item.GetPropertyValue("beginDate").ToString("dd/MM/yyyy")'>@item.GetPropertyValue("beginDate").ToString("dd MMM")</a></li>

                          
                            



                            }
                            }
                        @*<li><a href="#0" data-date="28/02/2017">28 Feb</a></li>
                        <li><a href="#0" data-date="20/04/2017">20 Mar</a></li>
                        <li><a href="#0" data-date="20/05/2017">20 May</a></li>
                        <li><a href="#0" data-date="09/07/2017">09 Jul</a></li>*@


                    </ol>
                    <span class="filling-line" aria-hidden="true"></span>
                </div> <!-- .events -->
            </div> <!-- .events-wrapper -->

            <ul class="cd-timeline-navigation">
                <li><a id="prev" href="#0" class="prev inactive">Prev</a></li>
                <li><a href="#0" class="next">Next</a></li>
            </ul> <!-- .cd-timeline-navigation -->
        </div> <!-- .timeline -->
        <div class="events-content">
            <ol>
                @{

                bool isfirstRow=true;

                <li class="" data-date="@dateNow">

                <p> <img class="img-center" src="item.image" alt="item.nameEn" /></p>
                <h2>item.GetPropertyValue("NameEn") </h2>
                <em>item.GetPropertyValue("beginDate").ToString("dd MMMM yyyy") - item.GetPropertyValue("endDate").ToString("dd MMMM yyyy") </em>
                <p>
                    item.GetPropertyValue("DescriptionEn")
                </p>
                </li>
              

                foreach(dynamic item in items){
                if (isfirstRow)
                {
                select="selected";
                }else
                {
                select="";
                }
                isfirstRow=false;
                <li class="" data-date="@item.GetPropertyValue("beginDate").ToString("dd/MM/yyyy")">
                <h2>@item.GetPropertyValue("NameEn") </h2>
                <p>  <img class="img-center" src="@item.image" alt="@item.nameEn" /> </p>

               
                <em>@item.GetPropertyValue("beginDate").ToString("dd MMMM yyyy") - @item.GetPropertyValue("endDate").ToString("dd MMMM yyyy") </em>
                <p>
                    @item.GetPropertyValue("DescriptionEn")
                </p>
                <p class="text-center"><a class="button  " href='/en/exhibitions/past/exhibition/'>Read more</a></p>
                </li>
                }
                }
                @*<li data-date="28/02/2017">
                    <h2>Event title here</h2>
                    <em>February 28th, 2014</em>
                    <p>
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Illum praesentium officia, fugit recusandae ipsa, quia velit nulla adipisci? Consequuntur aspernatur at, eaque hic repellendus sit dicta consequatur quae, ut harum ipsam molestias maxime non nisi reiciendis eligendi! Doloremque quia pariatur harum ea amet quibusdam quisquam, quae, temporibus dolores porro doloribus.
                    </p>
                </li>
                <li data-date="20/04/2017">
                    <h2>Event title here</h2>
                    <em>March 20th, 2014</em>
                    <p>
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Illum praesentium officia, fugit recusandae ipsa, quia velit nulla adipisci? Consequuntur aspernatur at, eaque hic repellendus sit dicta consequatur quae, ut harum ipsam molestias maxime non nisi reiciendis eligendi! Doloremque quia pariatur harum ea amet quibusdam quisquam, quae, temporibus dolores porro doloribus.
                    </p>
                </li>
                <li data-date="20/05/2017">
                    <h2>Event title here</h2>
                    <em>May 20th, 2014</em>
                    <p>
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Illum praesentium officia, fugit recusandae ipsa, quia velit nulla adipisci? Consequuntur aspernatur at, eaque hic repellendus sit dicta consequatur quae, ut harum ipsam molestias maxime non nisi reiciendis eligendi! Doloremque quia pariatur harum ea amet quibusdam quisquam, quae, temporibus dolores porro doloribus.
                    </p>
                </li>
                <li data-date="09/07/2017">
                    <h2>Event title here</h2>
                    <em>July 9th, 2014</em>
                    <p>
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Illum praesentium officia, fugit recusandae ipsa, quia velit nulla adipisci? Consequuntur aspernatur at, eaque hic repellendus sit dicta consequatur quae, ut harum ipsam molestias maxime non nisi reiciendis eligendi! Doloremque quia pariatur harum ea amet quibusdam quisquam, quae, temporibus dolores porro doloribus.
                    </p>
                </li>
      
                <li data-date="15/09/2017">
                    <h2>Event title here</h2>
                    <em>September 15th, 2014</em>
                    <p>
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Illum praesentium officia, fugit recusandae ipsa, quia velit nulla adipisci? Consequuntur aspernatur at, eaque hic repellendus sit dicta consequatur quae, ut harum ipsam molestias maxime non nisi reiciendis eligendi! Doloremque quia pariatur harum ea amet quibusdam quisquam, quae, temporibus dolores porro doloribus.
                    </p>
                </li>*@
               

            </ol>
        </div> <!-- .events-content -->
    </section>
                                             </div>
                                         </section>
     
   

  


                                         <link href="~/Modules/horizontal-timeline/css/reset.css" rel="stylesheet" />
                                         <link href="~/Modules/horizontal-timeline/css/style.css" rel="stylesheet" />
                                        
                                         <script src="~/Modules/horizontal-timeline/js/modernizr.js"></script> 
                                         <script src="~/Modules/horizontal-timeline/js/jquery.mobile.custom.min.js"></script> 
   
                                         <script src="~/Modules/horizontal-timeline/js/main.js"></script>
    <script>

        window.onload = function () {
            $('#aNow').click();
            $('#prev').click();
      
        };
     

    </script>